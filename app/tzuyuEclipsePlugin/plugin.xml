<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
 	<extension
          point="org.eclipse.core.expressions.propertyTesters">
       <propertyTester
             class="tzuyu.plugin.tester.propertytester.SelectionFilter"
             id="tzuyu.plugin.tester"
             namespace="tzuyu.plugin.tester"
             properties="isForTzuyuTest"
             type="java.lang.Object">
       </propertyTester>
       <propertyTester
             class="tzuyu.plugin.tester.propertytester.SelectionFilter"
             id="tzuyu.plugin.tester.analysis"
             namespace="tzuyu.plugin.tester"
             properties="isForAnalysis"
             type="java.lang.Object">
       </propertyTester>
       <propertyTester
             class="tzuyu.plugin.tester.propertytester.SelectionFilter"
             id="tzuyu.plugin.tester.dfaFile"
             namespace="tzuyu.plugin.tester"
             properties="isForDfaReader"
             type="org.eclipse.jface.viewers.IStructuredSelection">
       </propertyTester>
    </extension>
    <extension
          id="tzuyu"
          point="org.eclipse.ui.menus">
       <menuContribution
             allPopups="true"
             locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?before=additions">
          <menu
                id="tzuyu.plugin.menu"
                label="Tzuyu">
             <command
                   commandId="tzuyu.plugin.command.generateTestcases"
                   id="tzuyu.plugin.menu.generateTestcases"
                   label="%menu.generateTestCase"
                   style="push">
                 <visibleWhen
	                   checkEnabled="true">
		                <with variable="selection">
		                   <test
	                          forcePluginActivation="true"
	                          property="tzuyu.plugin.tester.isForTzuyuTest"/>
		                </with>
		         </visibleWhen>
             </command>
             <command
                   commandId="tzuyu.plugin.command.genTestWizard"
                   label="%menu.openDialog"
                   style="push">
                <visibleWhen
	                   checkEnabled="true">
		                <with variable="selection">
		                   <test
	                          forcePluginActivation="true"
	                          property="tzuyu.plugin.tester.isForTzuyuTest"/>
		                </with>
		         </visibleWhen>
             </command>
             <command
                   commandId="tzuyu.plugin.command.dfalearning"
                   label="%menu.dfalearning"
                   style="push">
             </command>
             <separator
                   name="tzuyu.plugin.menu.testAnalyze.separator"
                   visible="true">
             </separator>
             <command
                   commandId="tzuyu.plugin.command.analyze"
                   id="tzuyu.plugin.menu.icsetlv"
                   label="%menu.icsetlv"
                   style="push">
                <visibleWhen
                      checkEnabled="true">
                       <with variable="selection">
	                   		<test
	                          forcePluginActivation="true"
	                          property="tzuyu.plugin.tester.isForAnalysis"/>
	                	</with>
                </visibleWhen>
             </command>
          </menu>
          <menu
                label="Tzuyu">
             <command
                   commandId="tzuyu.plugin.command.readDfa"
                   style="push">
             </command>
             <visibleWhen
                   checkEnabled="true">
                <and>
                   <with
                         variable="selection">
                      <count
                            value="1">
                      </count>
                      <iterate
                            ifEmpty="false"
                            operator="and">
                         <and>
                            <test
                                  property="tzuyu.plugin.tester.isForDfaReader">
                            </test>
                         </and>
                      </iterate>
                   </with>
                </and>
             </visibleWhen>
          </menu>
       </menuContribution>
       <menuContribution
             allPopups="true"
             locationURI="popup:org.eclipse.jdt.ui.PackageExplorer?before=additions">
             <menu id="tzuyu.plugin.menu" label="Tzuyu"/>
       </menuContribution>
       <menuContribution
             allPopups="true"
             locationURI="popup:org.eclipse.jdt.ui.ProjectsView?before=additions">
             <menu id="tzuyu.plugin.menu" label="Tzuyu"/>
       </menuContribution>
  	   <menuContribution
             allPopups="true"
             locationURI="popup:org.eclipse.jdt.ui.CompilationUnitEditor.EditorContext?before=additions">
             <menu id="tzuyu.plugin.menu" label="Tzuyu"/>
       </menuContribution>
    </extension>
    <extension
          point="org.eclipse.ui.commands">
       <command
             defaultHandler="tzuyu.plugin.tester.command.gentest.GenTestHandler"
             id="tzuyu.plugin.command.generateTestcases"
             name="Generate test cases">
       </command>
       <command
             defaultHandler="tzuyu.plugin.tester.command.gentestwizard.GenTestWizardHandler"
             id="tzuyu.plugin.command.genTestWizard"
             name="GenTest Wizard">
       </command>
       <command
             defaultHandler="tzuyu.plugin.tester.command.readDfa.ReadDfaHandler"
             id="tzuyu.plugin.command.readDfa"
             name="%menu.readDfa">
       </command>
       <command
             defaultHandler="tzuyu.plugin.icsetlv.command.AnalysisHandler"
             id="tzuyu.plugin.command.analyze"
             name="%menu.icsetlv">
       </command>
       <command
             defaultHandler="tzuyu.plugin.tester.command.dfalearning.DfaLearningHandler"
             id="tzuyu.plugin.command.dfalearning"
             name="DFA learning">
       </command>
    </extension>
    <extension
          point="org.eclipse.ui.propertyPages">
       <page
             class="tzuyu.plugin.tester.preferences.ProjectPropertyPage"
             id="tzuyu.plugin.propertypages"
             name="%propertypages.name">
          <enabledWhen>
             <adapt
                   type="org.eclipse.core.resources.IProject">
             </adapt>
          </enabledWhen>
       </page>
    </extension>
    <extension
          point="org.eclipse.core.runtime.preferences">
       <initializer
             class="tzuyu.plugin.tester.preferences.TzPreferenceInitializer">
       </initializer>
    </extension>
    <extension
          point="org.eclipse.ui.views">
       <category
             id="tzuyu.plugin.view.category.general"
             name="%view.category.name">
       </category>
       <view
             category="tzuyu.plugin.view.category.general"
             class="tzuyu.plugin.tester.view.dfa.DfaView"
             id="tzuyu.plugin.view.dfa"
             name="%view.dfa.name"
             restorable="true">
       </view>
       <view
             category="tzuyu.plugin.view.category.general"
             class="tzuyu.plugin.view.example.WordView"
             id="tzuyu.plugin.view.ex"
             name="Word view"
             restorable="true">
       </view>
       <view
             allowMultiple="true"
             category="tzuyu.plugin.view.category.general"
             class="tzuyu.plugin.icsetlv.view.BugTraceView"
             id="tzuyu.plugin.view.slicingmarker"
             name="%view.slicingmarker.name"
             restorable="true">
       </view>
    </extension>
    <extension
          point="org.eclipse.ui.console.consoleFactories">
       <consoleFactory
             class="tzuyu.plugin.tester.console.TzConsoleFactory"
             label="%console.name">
       </consoleFactory>
    </extension>
    <extension
          point="org.eclipse.ui.console.consolePageParticipants">
       <consolePageParticipant
             class="tzuyu.plugin.tester.console.TzConsoleParticipant"
             id="tzuyu.plugin.console.TzConsoleFactory.consolePageParticipant">
          <enablement>
             <instanceof
                   value="tzuyu.plugin.tester.console.TzConsole">
             </instanceof></enablement>
       </consolePageParticipant>
    </extension>
    <extension
          point="org.eclipse.ui.themes">
       <fontDefinition
             categoryId="tzuyu.plugin.theme"
             defaultsTo="org.eclipse.jface.textfont"
             id="tzuyu.plugin.consoleFont"
             label="%console.name">
       </fontDefinition>
       <themeElementCategory
             id="tzuyu.plugin.theme"
             label="%plugin.name">
       </themeElementCategory>
    </extension>
    <extension
          id="tzuyu.plugin.analyzer.slicing.marker"
          name="%analyzer.slicing.marker.name"
          point="org.eclipse.core.resources.markers">
       <super
             type="org.eclipse.core.resources.textmarker">
       </super>
       <persistent
             value="false">
       </persistent>
    </extension>
    <extension
          point="org.eclipse.ui.editors.annotationTypes">
       <type
             markerSeverity="0"
             markerType="tzuyu.plugin.analyzer.slicing.marker"
             name="tzuyu.plugin.analyzer.slicing.marker.annotation">
       </type>
    </extension>
    <extension
          point="org.eclipse.ui.editors.markerAnnotationSpecification">
       <specification
             annotationType="tzuyu.plugin.analyzer.slicing.marker.annotation"
             colorPreferenceKey="tzslcolor"
             colorPreferenceValue="255, 255, 128"
             highlightPreferenceKey="tzslhighlight"
             highlightPreferenceValue="true"
             includeOnPreferencePage="true"
             label="%analyzer.slicing.marker.annotation.label"
             overviewRulerPreferenceKey="tzslruler"
             overviewRulerPreferenceValue="true"
             presentationLayer="6"
             textPreferenceKey="tzsltext"
             textPreferenceValue="true"
             textStylePreferenceKey="tzslstyle"
             textStylePreferenceValue="SQUIGGLES"
             verticalRulerPreferenceKey="tzslvertical"
             verticalRulerPreferenceValue="true">
       </specification>
    </extension>
</plugin>
